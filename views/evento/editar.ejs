<%- include('../partials/head.ejs') %>
<%- include('../partials/nav.ejs') %>

<br>
<div class="container">
    <div class="card  ">
        <div class="card-header">
            Editar Evento
        </div>
        <div class="card-body">
            <form method="post" action="/eventos/salvar">
                <input type="hidden" name="id" value="<%= evento.id %>">
                
                <div class="form-floating mb-3">
                    <input 
                        type="text" 
                        class="form-control"
                        name="nome"
                        id="nome"
                        placeholder="Nome do evento"
                        value="<%= evento.nome %>"
                        required>
                    <label for="nome">Nome do evento</label>
                </div>
                
                <div class="form-floating mb-3">
                    <input 
                        type="date" 
                        class="form-control"
                        name="data"
                        id="data"
                        placeholder="Data do evento"
                        value="<%= evento.data.toISOString().substring(0, 10) %>"
                        required>
                    <label for="data">Data do evento</label>
                </div>
                
                <div class="form-floating mb-3">
                    <select 
                        class="form-control" 
                        name="artistaId"
                        id="artistaId"
                        required>
                        <% artistas.forEach(artista => { %>
                            <% if(artista.id === evento.artistaId) { %>
                                <option value="<%= artista.id %>" selected><%= artista.nome %></option>
                            <% } else { %>
                                <option value="<%= artista.id %>"><%= artista.nome %></option>
                            <% } %>
                        <% }) %>
                    </select>
                    <label for="artistaId">Selecione o Artista</label>
                </div>
                
                <div class="form-floating mb-3">
                    <select 
                        class="form-control" 
                        name="organizadorId"
                        id="organizadorId"
                        required>
                        <% organizadores.forEach(organizador => { %>
                            <% if(organizador.id === evento.organizadorId) { %>
                                <option value="<%= organizador.id %>" selected><%= organizador.nome %></option>
                            <% } else { %>
                                <option value="<%= organizador.id %>"><%= organizador.nome %></option>
                            <% } %>
                        <% }) %>
                    </select>
                    <label for="organizadorId">Selecione o Organizador</label>
                </div>
                
                <div class="form-floating mb-3">
                    <select 
                        class="form-control" 
                        name="categoriaId"
                        id="categoriaId"
                        required>
                        <% categorias.forEach(categoria => { %>
                            <% if(categoria.id === evento.categoriaId) { %>
                                <option value="<%= categoria.id %>" selected><%= categoria.tipo %></option>
                            <% } else { %>
                                <option value="<%= categoria.id %>"><%= categoria.tipo %></option>
                            <% } %>
                        <% }) %>
                    </select>
                    <label for="categoriaId">Selecione a Categoria</label>
                </div>
                
                <div class="form-floating mb-3">
                    <button class="btn btn-primary" type="submit">Salvar</button>
                    <a href="/eventos" class="btn btn-warning">Cancelar</a>
                </div>
            </form>
        </div>
    </div>
</div>

<%- include('../partials/footer.ejs') %>
